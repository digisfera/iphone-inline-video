!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.IPhoneInlineVideo=e()}}(function(){return function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){var d="function"==typeof require&&require;if(!u&&d)return d(a,!0);if(r)return r(a,!0);var m=new Error("Cannot find module '"+a+"'");throw m.code="MODULE_NOT_FOUND",m}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t){"use strict";function n(){}function i(e){for(var t in n.prototype)n.prototype.hasOwnProperty(t)&&(e.prototype[t]=n.prototype[t])}n.prototype.addEventListener=function(e,t){var n=this.__events=this.__events||{},i=n[e]=n[e]||[];i.push(t)},n.prototype.removeEventListener=function(e,t){var n=this.__events=this.__events||{},i=n[e];if(i){var o=i.indexOf(t);o>=0&&i.splice(o,1)}},n.prototype.emit=function(){var e=this.__events=this.__events||{},t=arguments[0],n=e[t];if(n)for(var i=0;i<n.length;i++){var o=n[i];o.apply(this,arguments)}},t.exports=i},{}],2:[function(e,t){"use strict";function n(e){var t=/\.[a-zA-Z0-9]+$/;return e.replace(t,".mp3")}function i(e){if("string"==typeof e)this._videoSrcToAudioSrc=function(){return e};else if("function"==typeof e)this._videoSrcToAudioSrc=e;else{if(void 0!==e)throw new Error("Invalid value for argument 0 (videoSrcToAudioSrc):",e);this._videoSrcToAudioSrc=n}this._videoElement=document.createElement("video"),this._videoElement.volume=0,this._audioElement=document.createElement("audio"),this._fakePlayAnimationFrameRequest=null,this._fakePlayingEmitted=!1;var t=this;t.addEventListener("error",function(){t.onerror&&t.onerror()}),t.addEventListener("playing",function(){t.onplaying&&t.onplaying()}),t._videoElement.addEventListener("loadedmetadata",function(){t.emit("loadedmetadata")}),t.addEventListener("loadedmetadata",function(){t.onloadedmetadata&&t.onloadedmetadata()}),t.__defineGetter__("currentTime",function(){return t._videoElement.currentTime}),t.__defineSetter__("currentTime",function(e){t._videoElement.currentTime=e,t._audioElement.currentTime=e}),t.__defineGetter__("src",function(){return t._videoElement.src}),t.__defineSetter__("src",function(e){t._videoElement.src=e,t._videoElement.load();var n=t._videoSrcToAudioSrc(e);t._audioElement.src=n}),t.__defineGetter__("volume",function(){return t._audioElement.volume}),t.__defineSetter__("volume",function(e){var n=t._audioElement.volume!==e;t._audioElement.volume=e,n&&t.emit("volumechange")}),t.__defineGetter__("duration",function(){return t._videoElement.duration}),t.__defineGetter__("paused",function(){return null===this._fakePlayAnimationFrameRequest})}var o=e("minimal-event-emitter");o(i),i.prototype.videoElement=function(){return this._videoElement},i.prototype.removeAttribute=function(){return this._videoElement.removeAttribute.apply(this._videoElement,arguments)},i.prototype.setAttribute=function(){return this._videoElement.setAttribute.apply(this._videoElement,arguments)},i.prototype.audioElement=function(){return this._audioElement},i.prototype.play=function(){function e(){t._fakePlayAnimationFrameRequest=requestAnimationFrame(e);var i=Date.now();if(t._videoElement.readyState>=t._videoElement.HAVE_METADATA&&t._audioElement.readyState>=t._audioElement.HAVE_METADATA){t._audioElement.paused&&t._audioElement.play();var o=(i-n)/1e3;t._videoElement.currentTime=t._videoElement.currentTime+o,t.emit("timeupdate"),t._fakePlayingEmitted||(t.emit("play"),t.emit("playing"),t._fakePlayingEmitted=!0)}n=i}var t=this;if(!t._fakePlayAnimationFrameRequest){t._audioElement.currentTime=t._videoElement.currentTime,t._fakePlayingEmitted=!1;var n=Date.now();e()}},i.prototype.pause=function(){this._audioElement.pause(),cancelAnimationFrame(this._fakePlayAnimationFrameRequest),this._fakePlayAnimationFrameRequest=null,this.emit("pause")},t.exports=i},{"minimal-event-emitter":1}]},{},[2])(2)});