!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.IPhoneInlineVideo=e()}}(function(){return function e(t,i,n){function o(a,d){if(!i[a]){if(!t[a]){var u="function"==typeof require&&require;if(!d&&u)return u(a,!0);if(r)return r(a,!0);var _=new Error("Cannot find module '"+a+"'");throw _.code="MODULE_NOT_FOUND",_}var m=i[a]={exports:{}};t[a][0].call(m.exports,function(e){var i=t[a][1][e];return o(i?i:e)},m,m.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,i){"use strict";function n(){}function o(e){for(var t in n.prototype)n.prototype.hasOwnProperty(t)&&(e.prototype[t]=n.prototype[t])}n.prototype.addEventListener=function(e,t){var i=this.__events=this.__events||{},n=i[e]=i[e]||[];n.push(t)},n.prototype.removeEventListener=function(e,t){var i=this.__events=this.__events||{},n=i[e];if(n){var o=n.indexOf(t);o>=0&&n.splice(o,1)}},n.prototype.emit=function(){var e=this.__events=this.__events||{},t=arguments[0],i=e[t];if(i)for(var n=0;n<i.length;n++){var o=i[n];o.apply(this,arguments)}},t.exports=o},{}],2:[function(e,t,i){"use strict";function n(e){var t=/\.[a-zA-Z0-9]+$/;return e.replace(t,".mp3")}function o(e){if("string"==typeof e)this._videoSrcToAudioSrc=function(){return e};else if("function"==typeof e)this._videoSrcToAudioSrc=e;else{if(void 0!==e)throw new Error("Invalid value for argument 0 (videoSrcToAudioSrc):",e);this._videoSrcToAudioSrc=n}this._videoElement=document.createElement("video"),this._videoElement.volume=0,this._audioElement=document.createElement("audio"),this._audioMutedForVideoLoad=!1,this._audioVolume=1,this._fakePlayAnimationFrameRequest=null,this._fakePlayingEmitted=!1;var t=this;t.addEventListener("error",function(){t.onerror&&t.onerror()}),t.addEventListener("playing",function(){t.onplaying&&t.onplaying()}),t.addEventListener("loadedmetadata",function(){t.onloadedmetadata&&t.onloadedmetadata()}),this._handleVideoLoadedMetadata=function(){t.emit("loadedmetadata")},t._videoElement.addEventListener("loadedmetadata",this._handleVideoLoadedMetadata),t.__defineGetter__("currentTime",function(){return t._videoElement.currentTime}),t.__defineGetter__("videoWidth",function(){return t._videoElement.videoWidth}),t.__defineGetter__("videoHeight",function(){return t._videoElement.videoHeight}),t.__defineSetter__("currentTime",function(e){t._videoElement.currentTime=e,t._audioElement.currentTime=e}),t.__defineGetter__("src",function(){return t._videoElement.src}),t.__defineSetter__("src",function(e){t._videoElement.src=e,t._videoElement.load();var i=t._videoSrcToAudioSrc(e);t._audioElement.src=i}),t.__defineGetter__("volume",function(){return t._audioVolume}),t.__defineSetter__("volume",function(e){var i=t._audioVolume!==e;t._audioVolume=e,this._audioMutedForVideoLoad||(t._audioElement.volume=t._audioVolume),i&&t.emit("volumechange")}),t.__defineGetter__("duration",function(){return t._videoElement.duration}),t.__defineGetter__("paused",function(){return null===this._fakePlayAnimationFrameRequest})}var r=e("minimal-event-emitter");r(o),o.prototype.destroy=function(){this._videoElement.removeEventListener("loadedmetadata",this._handleVideoLoadedMetadata),[this._videoElement,this._audioElement].forEach(function(e){e.pause(),e.volume=0,e.removeAttribute("src")}),this._videoElement=null,this._audioElement=null},o.prototype.videoElement=function(){return this._videoElement},o.prototype.removeAttribute=function(){return this._videoElement.removeAttribute.apply(this._videoElement,arguments)},o.prototype.setAttribute=function(){return this._videoElement.setAttribute.apply(this._videoElement,arguments)},o.prototype.audioElement=function(){return this._audioElement},o.prototype.play=function(){function e(){t._fakePlayAnimationFrameRequest=requestAnimationFrame(e);var n=Date.now(),o=t._videoElement.readyState>=t._videoElement.HAVE_CURRENT_DATA,r=t._audioElement.readyState>=t._audioElement.HAVE_CURRENT_DATA||t._audioElement.error;if(o&&r){t._audioMutedForVideoLoad&&(t._audioElement.currentTime=t._videoElement.currentTime,t._audioElement.volume=t._audioVolume,t._audioMutedForVideoLoad=!1);var a=(n-i)/1e3;t._videoElement.currentTime=t._videoElement.currentTime+a,t.emit("timeupdate"),t._fakePlayingEmitted||(t.emit("play"),t.emit("playing"),t._fakePlayingEmitted=!0)}i=n}var t=this;if(!t._fakePlayAnimationFrameRequest){t._audioMutedForVideoLoad=!0,t._audioElement.volume=0,t._audioElement.play(),t._fakePlayingEmitted=!1;var i=Date.now();e()}},o.prototype.pause=function(){this._audioElement.pause(),cancelAnimationFrame(this._fakePlayAnimationFrameRequest),this._fakePlayAnimationFrameRequest=null,this.emit("pause")},t.exports=o},{"minimal-event-emitter":1}]},{},[2])(2)});